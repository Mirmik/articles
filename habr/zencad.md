Что такое zencad. По сути эта система не предлагает ничего нового. 

Ее рецепт довольно прост. Концепт скриптового 3д моделирования openscad, геометрическое ядро opencascade, python3 в качестве клея, [del]блокчейн[/del] библиотека ленивых вычислений evalcache для агресивного кеширования вычислений. Добавить специй еще из пары-тройки инструментов, приправить gui под соусом PyQt, и подать к столу перемешав, но не взбалтывая.

Скриптовые CAD системы.
[]

В начале был OpenScad.
Автор данного текста, пожалуй бы, не рыпался, не будь у openscad некоторые недостатки:
- openscad работает только с mesh сетью.
- openscad имеет довольно низкий предел масштабируемости скрипта и он начинает сильно лагать на больших моделях.
- openscad довольно сложно интегрировать с другими системами, причиной чему использование собственного языка.

Первое, что здесь хочется поправить - взять в качестве боевого инструмента язык общего назначения. Использование языка общего назначения позволяет избавиться от кучи хлопот, использовать полноту его синтаксических возможностей и совокупность библиотек в 3д моделировании. (Например, очень удобно работать с облаком точек с применением синтаксиса генераторов).

[Объединение в zencad и openscad]

В целом применение python позволяет местами довольно сильно упростить код openscad, сделав код модели прозрачнее.

Если мы хотим, чтобы наша система легко интегрировалась к любой современной програмной системе, мы опять же без лишних раздумий выбираем python, дефакто занимающий в современной програмной экосистеме титул короля клея. Мы можем в одном скрипте использовать sympy для генерации аналитической поверхности, numpy для обработки сгенерированного по этой поверхности облака точек, [del]блокчейн[/del] evalcache для кеширования аналитическо-числовых расчетов и, конечно же, zencad для построения, визуализации и постобработки. 

[Аналитический парабалоид].

Второй точкой внедрения является использование полноценного геометрического ядра OpenCascade, использующего граничное представление вместо мешсетевой модели в OpenScad.

Построенный вокруг хакерского геометрического ядра opencascade, ZenCad, конечно же не ставит целью предоставить полноту его возможностей в среде python. Попытка в полной мере передать OpenCascade, привела бы к написанию второго pythonOCC. ZenCad берет по верхам, стараясь сохранить баланс между функциональностью и эргономичностью. 

[Бутылка]

При создании синтаксиса zencad, я старался по примеру OpenScad минимизировать количество сущностей в библиотеке. Как и его старший брат и учитель, ZenCad принципиально не умеет создавать примитив в точке (x,y,z). Он сначала создает примитив в начале координат, после чего задает ему необходимое ему положение, применяя преобразования:

[Пример]

С целью минимизации времени вычислений, математика в ZenCad ленифицирована, а все вычисления агрессивно закешированы. Управление алгоритмами ленификации берет на себя [del]блокчейн[/del] библиотека evalcache, о которой я рассказывал на страницах Хабрахабра некоторое время назад. [Ссылки] Результаты расчетов zencad сохраняет в общем кеше, состояние которого можно отслеживать через интерфейс визуализатора. Используемый хеш-алгоритм sha512 с очешуенной избыточностью исключают возможность коллизий хешключей ленивых объектов (Пространство хэша в 10^74 раз больше количества атомов во вселенной).

[Болт 4 мегабайта геометрии]

Как и старший брат, ZenCad способен обновлять генерируемую модель при модификации файла источника. В сочетании с системой кеширования, это позволяет довольно комфортно модифицировать скрипт, имея перед глазами практически в реальном времени изменяющееся состояние изделия.

Анимация.
На этом достоинства zencad не заканчиваются. 
ZenCad (спасибо шустрому ядру opencascade) умеет в реальном времени перерисовывать сцену, что позволяет анимировать 3д модель. Анимация реализуется обыкновенной функцией python и позволяет довольно вольно с собой обращаться. Учитывая, что мы находимся в среде python, zencad оказывается способен визуализировать в виде перемещений моделей данные из внешних источников (Например, с использованием multithreading + tcpsocket). Таким образом zencad может использоваться, например, для полунатурного тестирования робототехнических изделий... О, привет Gazebo!!! Привет ROS!!! Приятно видеть, что вы тоже в зрительном зале. Библиотека кинематики, которая существенно упростила бы построение кинематических цепей роботов манипуляторов, кстати говоря, в разработке...

Экспорт - импорт.
На текущий момент поддерживается экспорт и импорт в формате brep, что позволяет интегрироваться с freecad и экспорт в формате stl, что позволяет генерировать модели для 3д печати. Также поддерживается генерация скриншотов. В том числе автоматическая. На текущий момент некоторые, а в конечном итоге все, скриншоты объектов в онлайн мануале генерируются силами ZenCad в автоматическом режиме. 

Текущее состояние. 
На текущий момент ZenCad еще очень далёк от завершения, и тем не менее вполне работоспособен в той части, в которой готов.
Библиотека доступна в pipy для Debian совместимых осей с версиями языка python3.5, python3.6, python3.7
```sh
python3 -m pip install zencad 
```

Запуск из командной строки:
```python3
zencad 
```

Запуск helloworld из скрипта:
```python3
 
```

К сожалению, прогресс системы идет не так быстро, как хотелось бы. Еще не реализована большая часть апи двумерной геометрии и апи работы с поверхностями, поддержка экспорта и импорта стандартных форматов, не всегда прозрачна обработка ошибок, не проработано автоматическое тестирование. Остро стоит необходимость документирования (Понятно, что без документации библиотека гроша ломаного не стоит). Очень хочется доработать систему с тем, чтобы можно было запустить её под Windows (это требует довольно объёмной экспертно-разведывательной работы).

Тем не менее, уже сейчас zencad позволяет делать 3д модели, во всяком случае, не хуже OpenScad.

