\documentclass[a4paper]{article}

\usepackage[14pt]{extsizes}
\usepackage[left=30mm, top=25mm, right=20mm, bottom=25mm, nohead]{geometry}

\usepackage{xcolor}

\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{lipsum}
\setlength{\parindent}{3ex}
\setlength{\parskip}{1em}

\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[english, russian]{babel}
\usepackage{caption}

\usepackage{graphicx} 
\graphicspath{ {./images/} }

\definecolor{shadecolor}{RGB}{230,230,230}

\begin{document}

% НАЧАЛО ТИТУЛЬНОГО ЛИСТА
\begin{center}
\hfill \break
\hfill\break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\large{<<Применение тензорных сигналов в системах автоматичечкого управления объектами в трёхмерном пространстве.>>}\\
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\end{center}
 
\normalsize{ 
\begin{tabular}{lccl}
Автор: Н.Ф. Сорокин\\\\
\end{tabular}
}\\
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\hfill \break
\begin{center} \today \end{center}
\thispagestyle{empty} % выключаем отображение номера для этой страницы
\newpage
% КОНЕЦ ТИТУЛЬНОГО ЛИСТА

\section{Введение.}
\subsection{Преимущества тензорных сигналов.}

Известно, что системы управления работающие в условиях многомерного пространства имеют большое количество перекрёстных связей между каналами управления. Это объясняется тем, органы управления таких систем обычно связаны с самим объектом управления и эффект оказываемый ими на параметры объекта управления зависит от его текущего состояния, которое изменяется в процессе управления. Простое решение этой проблемы состоит в ограничении множества рассматриваемых рабочих состояний системы. Однако, синтез управления на основе уравнений движения, линеаризованных в ограниченном множестве опорных режимов, приводит к тому, что поведение системы зависит от выбранных скалярных каналов управления и не полностью реализует возможности технического изделия.

Синтез управления в терминах тензоров более естественен для систем работающих в пространстве, поскольку пространственные физические явления математически описываются в тензорной форме. Переходя к синтезу управления в тензорах мы получаем управление физически обоснованное, независимое от выбора расчетной системы координат и других допущений. 

Преимущество перехода к исчислению тензоров состоит в том, что многие перекрёстные связи, оказываются на самом деле всего-лишь следствием линейных преобразований над векторными/тензорными величинами. Такие перекрёстные оказываются частью операций более низкого уровня, а именно операций над тензорами. Тензорный вид уравнений движения и системы стабилизации снижает объёмность выкладок и является естественным для реализации в виде програмного кода в рамках объектного подхода. 

Отдельно стоит отметить, что использование векторных моторов (ссылка) и прочих параметров, объединяющих линейные и угловые параметры общей физической природы также уменьшает количество перекрестных связей в системе, поскольку эти компоненты часто оказываются взаимозависимыми при переходах между системами координат, а потому имеет смысл в качестве тензорных сигналов пространственных САУ использовать именно такие, объединенные пары угловых и линейных параметров. Уравнения движения объектов в моторах имеют достаточно простой вид и могут легко анализироваться.

\subsection{Место в теории автоматического управления.}
Системы управления с тензорными сигналами являются частным случаем более общего класса многомерных систем, рассматриваемых классиками ТАУ. Описание методов анализа и синтеза многомерных систем встречаются во многих работах. Эти методы могут применяться к рассматриваемому классу систем в общем порядке. 

Использование тензорных сигналов и сигналов в виде тензоров положения/ориентации, в тех или иных видах встречается в работах многих авторов. Например, в статье [] авторы строят систему управления квадрокоптером, используя для замыкания обратной связи кватернион ориентации. 

Настоящая статья посвящена математическим закономерностям таких систем, которые, по видимому, до настоящего момента широко не освещались.

\subsection{Требования к объектам управления.}
Забегая немного вперёд, можно сказать, что формализм тензорных сигналов удобен для построения систем автоматического управления объектами совершающими сложные движения в условиях изотропного пространства, мерность которого выше единицы.

К таким объектам относятся роботы-манипуляторы, дроны, некоторые виды автомашин, шагающие роботы. 
Хотя задачи, решаемые этими и другими группу ОУ, осуществляющими пространственные движения, могут существенно отличаться, само по себе управление положением и сопутствующими параметрами имеет общую математическую природу требующую общего описания.

Хочеться отметить интересное свойство СУ, работающих с тензорными сигналами. Некоторые задачи управления, которые мы можем сформулировать в трехмерном пространстве имеют прямые аналоги в пространстве двумерном. В терминах тензоров системы управления, решающие эти две задачи будут очень похожи друг на друга, что выражается в эквивалентности структурных схем СУ. То есть, фактически, оказывается возможным построение системы управления независимой от мерности пространства задачи. Поскольку практически важные задачи ограничены двумерным и трёхмерным пространствами (а также одномерным в вырожденном случае), врядли это наблюдение может иметь значимые практические следствия, но является интересным с теоретической точки зрения. 

\section{Обработка тензорных сигналов.}
Тензорным сигналом будем называть изменяющуюся во времени геометрическую сущность, независимую от выбора системы координат, и однозначно представленную набором (или эквивалентными наборами) своих компонент. 

Особенностью тензорного сигнала является множественность его возможных представлений вплоть до того, что в различных частях системы управления один и тот же тензорный сигнал может быть представлен разным набором компонент (так например, тензор угловой ориентации может быть представлен матрицей поворота, кватернионом или вектором наименьшего поворота и при этом эти формы могут быть заданы в различных базисах). Выбор компонентного представления в вычислительной системе не влияет на динамические свойства системы, поскольку операции над тензорами эквивалентны во всех системах координат.

\subsection{Тензор ориентации, тензор положения и их производные в цепи обратной связи. }
Тензор ориентации (или тензор поворота) является наиболее общим способом описания углового положения объекта или системы координат. Тензор поворота является тензором второго ранга и представлен матрицей поворота. Эквивалентной формой представления тензора поворота являются вектор конечного поворота. Связь между вектором конечного поворота и матрицей поворота определяется следующим образом:

\begin{equation}
R(\bar{\rho}) = 
\begin{bmatrix}
cos\theta+(1-cos\theta)x^2   && (1-cos\theta)xy-(sin\theta)z && (1-cos\theta)xz + (sin\theta)y\\
(1-cos\theta)yx+(sin\theta)z && cos\theta+(1-cos\theta)y^2   && (1-cos\theta)yz - (sin\theta)x\\
(1-cos\theta)zx-(sin\theta)y && (1-cos\theta)zy+(sin\theta)x && cos\theta+(1-cos\theta)z^2
\end{bmatrix}
\end{equation}
\begin{equation} \bar{\rho} = \theta \bar{\rho}_0 = \theta [x,y,z]^T 	\end{equation}
\begin{equation} |\bar{\rho}_0| = 1 									\end{equation}

Тензор положения является тензором второго ранга и представляет собой тензор поворота расширенный тензором(вектором) трансляции ([5]).
\begin{equation}
P = \begin{bmatrix}R&&r\\0&&1\end{bmatrix}
\end{equation}
, где R - 3x3 матрица поворота, r - 3x1 вектор трансляции, 0 - 1x3 нулевой вектор, 1 - 1x1 скаляр.  

Для построения САУ нам потребуется ввести сигнал ошибки положения объекта. 
Пусть U - тензор уставки положения, а X - тензор текущего положения.
Введем два типа невязок.

Адитивная невязка:
\begin{equation}
D = U - X
\end{equation}

Мультпликативная невязка:
\begin{equation} U = XE 		\end{equation}
\begin{equation} E = X^{-1}U 	\end{equation}

Подставив () в () получим:
\begin{equation} D = XE - X 	\end{equation}
\begin{equation} D = X(E - I)	\end{equation}
, где I - единичная матрица.

Матрица E - I имеет вид:
\begin{equation*} E - I = \end{equation*}
\begin{equation} 
\begin{bmatrix}
cos\theta-1+(1-cos\theta)x^2   && (1-cos\theta)xy-(sin\theta)z && (1-cos\theta)xz + (sin\theta)y && E_lx\\
(1-cos\theta)yx+(sin\theta)z && cos\theta-1+(1-cos\theta)y^2   && (1-cos\theta)yz - (sin\theta)x && E_ly\\
(1-cos\theta)zx-(sin\theta)y && (1-cos\theta)zy+(sin\theta)x && cos\theta-1+(1-cos\theta)z^2	   && E_lz\\
0&&0&&0&&0
\end{bmatrix}
\end{equation}

Поскольку следящие системы управления предназначены для работы в условиях малых невязок, будем считать что $\theta \rightarrow 0$ и отбросим члены порядок малости которых меньше единицы.
$sin(\theta) \rightarrow \theta$
$1 - cos(\theta) \rightarrow 0$

$$
(E - I)|_{\theta\rightarrow0} = E^* = 
\begin{bmatrix}
0         && -\rho_z &&  \rho_y && r_x\\
 \rho_z && 0         && -\rho_x && r_y\\
-\rho_y &&  \rho_x && 0         && r_z\\
0&&0&&0&&0
\end{bmatrix} = \begin{bmatrix}\rho_e^\times&&r_e\\0&&0\end{bmatrix}
$$
, где $r$ и $\rho$ - вектор трансляции и вектор поворота тензора E соответственно.

Таким образом, в условиях малости невязки:
\begin{equation} D \approx X E^* = \begin{bmatrix}X_a&&X_l\\0&&1\end{bmatrix} \begin{bmatrix}\rho_e^\times&&r_e\\0&&0\end{bmatrix} = \begin{bmatrix}X_a\rho_e^\times&&X_ar_e\\0&&0\end{bmatrix} \end{equation}

Угловая компонента представляет из себя антисимметричный тензор и может быть эквивалентно представлена сопряженным вектором, который является вектором поворота мультипликативной невязки:

Таким образом в векторной форме тензор D приближённо имеет вид:
\begin{equation} D_{vec} \approx \begin{bmatrix}X_a\rho_e\\X_ar_e\end{bmatrix} \end{equation}

Продифференцируем аддитивную невязку по времени:
\begin{equation} \dot{D} = \dot{U} -\dot{X} \end{equation}

В работе [] показано, что производная тензора поворота может быть представлена в следующей форме
\begin{equation} \dot{R} = R S \end{equation}
, где R - тензор ориентации S - правый тензор спина.

Тогда 
\begin{equation} 
\dot{D} = \begin{bmatrix}\dot{U_a} - \dot{X_a}&&\dot{U}_l-\dot{X}_l\\0&&0\end{bmatrix} 
= \begin{bmatrix}U_aS_u - X_aS_x&&V_u-V_x\\0&&0\end{bmatrix}\end{equation}

Приняв во внимание, что антисимметричный тензор правого спина может быть эквивалентно представлен вектором правой угловой скорости (), а также воспользовавшись приёмом аналогичным () для векторного вида тензора производной аддитивной невязки имеем:

\begin{equation}\dot{D}_{vec} = \begin{bmatrix}U_a\Omega_u-X_a\Omega_x\\ V_u-V_x\end{bmatrix}\end{equation}

Если рассматривать невязки в собственной и ли близкой к ней системах координат, $X_a\rightarrow I$ и сигналы невязок получают вид:
\begin{equation} D_{vec} \approx \begin{bmatrix}\rho_e\\r_e\end{bmatrix} \end{equation}
\begin{equation}\dot{D}_{vec} = \begin{bmatrix}E_a\Omega_u-\Omega_x\\ V_u-V_x\end{bmatrix}
\approx\begin{bmatrix}\Omega_u-\Omega_x\\ V_u-V_x\end{bmatrix}
\end{equation}

Векторные невязки позволяют при расчете управления избавиться от матричных форм тензоров положения с целью снижения размерности задачи. Необходимо учитывать, что переход к векторной форме аддитивной невязки корректен только при малых углах относительного поворота.

\section{Вращения тензорных сигналов и переменных состояния.}
Прежде чем перейти непосредственно к построению замкнутой системы управления, исследуем одну из принципиальных нелинейностей этого класса систем управления.

Поскольку часть сигналов, из числа тех, что должны анализироваться СУ задано в базовой системе координат, а часть в собственной, оказывается, что переменные состояния по разному реагируют на изменение углового положения объекта управления. 

Если сравнить поведение вектора силы тяжести и вектора тяги летательного аппарата, то окажется, что в базовой системе координат вектор силы тяжести неподвижен, а вектор силы тяги вращается вместе с собственной системой координат. Если же мы рассмотрим эти же вектора в собственной системе координат, то вектор силы тяги будет неподвижен, а вектор силы тяжести будет вращаться обратно вращению собственной системы координат.

Фактически, если принять во внимание, что точно так же, в зависимости от принадлежности к родительской системе координат себя ведут все переменные состояния, включая даже те, что не являются физическими величинами, а существуют только в памяти вычислителя, можно сказать, что СУ включает в себя несколько вращающихся/перемещающихся друг относительно друга сигнальных доменов.

В общем случае таких сигнальных доменов может быть больше двух, но такой случай не будет являться темой этой статьи, и мы ограничимся рассмотрением доменов базовой и собственной систем координат. 

Поскольку сигналы СУ работают с переменными обоих доменов, некоторые сигналы приходится переводить в неродную систему координат. Это означает, что в точке пересечения границы домена сигнал домножается на переменный матричный коэффициент, численно равный матрице относительного поворота $P_A^B$ входной $A$ и выходной $B$ систем координат. $P_A^B$ зависит от переменных фазового пространства состояний.

Если векторный сигнал $s_a$ пересекает границу домена $A$, то в домене $B$ тот же сигнал будет иметь вид:

\begin{equation} s_b(s) = P_A^B(x) s_a(s) \end{equation}

Рассмотрим управляемый тензорный преобразователь сигнала $C(s,x)$, находящейся в системе управления на границе домена.

\begin{equation} s_b(s) = P_A^B(x) C(s,x) s_a(s) \end{equation}

Поскольку мы можем управлять состоянием $C(s,x)$, всегда можно задать $C(s,x)$ в виде

\begin{equation} C(s,x) = P_B^A(x) C^*(s,x) \end{equation}
, где $C^*$ выбирается согласно прочим условиям. Тогда:
\begin{equation} s_b(s) = C^*(s,x) s_a(s) \end{equation}

Отсюда следует, что управляемый оператор на границе доменов позволяет убрать нелинейность системы управления, связанную с переходом сигнала через границу домена. Аналогично можно показать, что управляемый преобразователь сигнала способен компенсировать эффект не только этого, но и прочих переменных коэффициентов усиления и их композиций.

\section{Замкнутая системы управления и её устойчивость.}
Рассмотрим вопрос устойчивости закнутой системы управления положением объекта.

Пусть структурная схема системы дана в следующем виде.

(Схема).

Для анализа устойчивости системы введём абсолютную систему координат и связанный с ней тензор положения O, а так же неподвижную опорную систему координат и связанный с ней тензор положения Q, таким образом, чтобы в системе Q тензоры X и U оказались малыми и могли быть эквивалентно представлены в векторном виде.

\begin{equation}
X = \begin{bmatrix}\rho_x\\r_x\end{bmatrix};  
U = \begin{bmatrix}\rho_u\\r_u\end{bmatrix}
\end{equation},
причем, $X_a \rightarrow I$.

Тогда, в опорной системе Q структурная схема может быть переписана в следующем виде.

(Схема2)

Замкнутый контур системы включает в себя 2 точки перехода сквозь границу сигнальных доменов.

Выделим в подцепочке домена S прямой канал:
\begin{equation} 
P_S^Q(x) K_d W_d P_Q^S(x) 
= P_S^Q(x) K_d P_Q^S(x) + P_S^Q(x) (K_d - K_d + K_d W_d) P_Q^S(x) = P_S^Q(x) K_d P_Q^S(x) + P_S^Q(x) K_d (W_d - I) P_Q^S(x) \end{equation}

Теперь задав функцию управляемого преобразователя сигнала с помощью метода определённого в разделе [].
\begin{equation} C(s,x) = C^*(s,x) P_S^Q(x) K_{d}^{-1} P_Q^S(x) \end{equation}

Эта форма управления привела к тому, что замкнутый контур САУ разделился на линейную и нелинейную части.
Можно показать, что функция $(W_d - I)$ стресится к нулю при $s \rightarrow \inf$. Таким образом нелинейная составляющая сигнала проявляет себя ограниченный период времени после эволюции системы. Нелинейный эффект связан с переходным процессом движителя, а длительность эффекта определяется постоянной времени.   

Далее рассмотрим случай, когда динамикой $W_d$ возможно принебречь. Действительно, если возможно принебречь динамикой в передаточной функции $W_{d}$, то $W_{d}$ обращается в единичный коэффициент усиления и второй контур можно отбросить. В линеаризованном режиме выбранной опорной системы координат система управления становится многомерной линейной системой. Методы анализа устойчивости таких систем достаточно хорошо проработаны.

Предположим, что мы доказали устойчивость этой системы. Очевидно, что, при работе во всём диапазоне возможных положений, с течением времени система покинет область линеаризации выбранного режима. Однако существует бесконечное множество опорных систем Q и передаточные функции линеаризованной системы будут эквивалентны во всех, а значит, если доказать устойчивость в одном опорном режиме, будет автоматически доказана устойчивость во всех опорных режимах. 

Хотя в общем случае, доказательство устойчивости на непрерывном множестве опорных режимов не является доказательством того, что переходный процесс когда-либо завершится, можно предположить, что квазилинейный сферический характер зависимости переменных состояния тензоров положения налагает менее серьёзные ограничения и система будет ожидаемо себя вести во всём диапазоне возможных состояний положений и скоростей.

На практике в качестве опорной системы Q удобно в каждый момент времени рассматривать мгновенную неподвижную систему координат, тензор положения которой численно совпадает с тензором собственной системы координат. Хотя такая система будет изменяться на каждой итерации алгоритма, мы всегда можем утверждать, что данная опорная система существовала за какое-то время до и будет существовать какое-то время после, а значит анализ устойчивости, не имеющий очевидного смысла для мгновенной системы, в такой системе всё равно имеет силу. 

\section{Группы органов управления}
До этого момента мы рассматривали абстроктное тензорное управляющее воздействие, однако в реальности практически не встречаются органы управления способные к генерации многомерного тензорного управляющего воздействия.

Невозможность создать такое управляющее воздействие одним органом управления очевидно разрешается при использовании нескольких совместно действующих органов управления.

Группой органов управления будем называть совокупность органов управления, совместно решающих задачу построения тензора управления U в виде $U = U(v_0, v_1, ..., v_n)$, где $n$ - количество органов управления. Если относительно управляющих воздействий органов управления выполняется принцип суперпозиции, то U является линейной комбинацией. 

\begin{equation}U = a_0v_0 + a_1v_1 + ... + a_iv_i.\end{equation}
\begin{equation}u_i=a^i_jv^j\end{equation}
\begin{equation}U = AV\end{equation}

Уравнение () есть система линейных уравнений к решению которой сводится задача поиска управляюющего воздействия отдельных органов группы. Система () может иметь одно решение, не иметь решений вовсе или же иметь множество решений.

Случай отсутствия решений означает, что желаемое управление, требуемое от группы не может быть выполненно (вероятно, в силу физической несовместимости). 

Случай множества решений означает, что желаемое управление может быть достигнуто множеством способов. 
Поиск одного из множества решений возможен с использованием метода псевдообратной матрицы, однако вероятно, разработчик СУ захочит задать правила выбора конкретного решения из доступного множества.

Поиск оптимального решения на данном множестве требует введения функционала оптимизации и, возможно, дополнительных условий.

\begin{equation}F(V) -> min\end{equation}
\begin{equation}AV = U\end{equation}
\begin{equation}CV <= d\end{equation}

Если F(V) - квадратичный функционал, а дополнительные условия отсутствуют, задача () является задачей квадратичного программирования и может быть разрешена в форме:

\begin{equation}
\begin{vmatrix}
Q & A^T\\
A & 0
\end{vmatrix}
\begin{bmatrix}
x\\
\lambda
\end{bmatrix}
=
\begin{bmatrix}
-c\\
U
\end{bmatrix}
\end{equation}

\subsection{Матрица чувствительности группы органов управления.}
Вернемся к вопросу поиска матрица A из уравнения ().

Как было сказано выше, уравнение в форме () может быть записано, если относительно воздействия органов управления выполняется принцип суперпозиции. 

Матрица A есть матрица частных производных $\frac{\partial{u^i}}{\partial{v^j}}$.

Практически значимыми примерами групп органов управления являются системы с суперпозицией силовых и мгновенных кинематических воздействий. Для них матрица А формируется из компонент линейного оператора переноса соответствующего воздействия:

Силовой перенос.
Кинематический перенос.

Из формы операторов переноса следует, что линейные и угловые параметры при построении желаемого управления должны рассматриваться совместно. Такой подход свойственнен для винтового исчисления / исчисления векторных моторов. Следует отметить, что векторный мотор является тензором и к нему применимо всё, описанное в предыдущих разделах.  

\subsection{Место группы органов управления в структурной схеме СУ.}

\section{Учёт неидеальности передаточных функций органов управления.}
В следствие неидеальности органов управления, в структурной схеме между вычислителем и эффектом управления возникает обусловленная динамикой органов управления передаточная функция. Эта функция является диагонально матричной, поскольку каждый орган управления может иметь отличающиеся передаточную функции и постоянную времени. С целью улучшения качества управления следует стремиться выравнить передаточные функции органов управления. Если различия постоянных времени и передаточных функций обусловленно конструкционно, достигнуть этого эффекта можно с помощью введения дополнительной фильтрации управляющих сигналов по каждому отдельному каналу.

\section{Эффект миграции управляющего сигнала.}
Инерционность органов управления также приводит к эффекту миграции управляющего сигнала, выраженного в том, что в случае изменения оператора переноса управляющего воздействия (вследствии каких-либо эволюций системы, например её поворота или изменения плеча), управление накопленное органом управления неуспевает подстроиться под новую матрицу чувствительности и тензор управления получает неучтенную добавку.

Вычислим ее (учитывая, что R - линейный оператор):

\begin{equation}U_vi = R^\times V_i\end{equation}
\begin{equation}\dot{U}_vi = R^\times \frac{\partial{V_i}}{\partial{t}} + \dot{R}^\times V_i\end{equation}

Второе слагаемое в этом уравнении отвечает за неучтенный сигнал миграции управляющего воздействия.  

\section{Вывод.}
Проведенный анализ показывает, что принципиальных проблем для использования тензорных сигналов в системах автоматического управления нет. 

Специфика тензорного управления накладывает некоторые коррективы на семантику математических операций, не нарушая при этом принципов построения систем с обратной связью.

Введение групп органов управления позволяет получить тензорный сигнал управления и замкнуть им систему с тензорной обратной связью. 

Приведенные выкладки не опираются на физические особенности какой-либо конкретной группы объектов управления, а потому могут быть применены к широкому классу систем.

\end{document}



Литература

[1] Full Quaternion Based Attitude Control for a Quadrotor, 2013, Emil Fresk and George Nikolakopoulos
[2] Магия тензорной алгебры https://habr.com/ru/post/261991/
[3] Преобразования Гиперкомплексных чисел.
[4] Жилин. Тензоры....
[5] Голованов Н.Н. Геометрическое моделирование.